# æ•…éšœæ’é™¤æŒ‡å—

æœ¬æ–‡æ¡£æä¾›å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿè§£å†³æœ¬åœ°å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ã€‚

## ğŸ”§ å¸¸è§é—®é¢˜

### 1. ç«¯å£å ç”¨é—®é¢˜

#### é—®é¢˜æè¿°
```
Error: listen EADDRINUSE: address already in use :::3001
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ¸…ç†è„šæœ¬**
```bash
./start.sh  # è„šæœ¬ä¼šè‡ªåŠ¨æ¸…ç†ç«¯å£
```

**æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ¸…ç†ç«¯å£**
```bash
# æ¸…ç†åç«¯ç«¯å£ (3001)
lsof -ti:3001 | xargs kill -9

# æ¸…ç†å‰ç«¯ç«¯å£ (3000)
lsof -ti:3000 | xargs kill -9
```

**æ–¹æ³•ä¸‰ï¼šæ€æ‰æ‰€æœ‰Nodeè¿›ç¨‹**
```bash
killall -9 node
```

### 2. ä¾èµ–å®‰è£…å¤±è´¥

#### é—®é¢˜æè¿°
```
npm ERR! code ENOENT
npm ERR! Cannot find module ...
```

#### è§£å†³æ–¹æ¡ˆ

**å®Œå…¨æ¸…ç†å¹¶é‡æ–°å®‰è£…**
```bash
# 1. åˆ é™¤æ‰€æœ‰ä¾èµ–
rm -rf node_modules client/node_modules
rm package-lock.json client/package-lock.json

# 2. æ¸…ç†npmç¼“å­˜
npm cache clean --force

# 3. é‡æ–°å®‰è£…
npm install
cd client && npm install && cd ..
```

**æˆ–ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬**
```bash
./setup.sh
```

### 3. å‰ç«¯æ— æ³•è¿æ¥åç«¯

#### é—®é¢˜æè¿°
å‰ç«¯é¡µé¢æ˜¾ç¤ºï¼Œä½†æ— æ³•è·å–æ•°æ®ï¼Œæ§åˆ¶å°æ˜¾ç¤ºç½‘ç»œé”™è¯¯ã€‚

#### è§£å†³æ–¹æ¡ˆ

**1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ**
```bash
curl http://localhost:3001/api/capacity/cto-dashboard
```

**2. æ£€æŸ¥ç¯å¢ƒé…ç½®**
```bash
# ç¡®ä¿ client/.env æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®
cat client/.env
# åº”è¯¥åŒ…å«:
# REACT_APP_API_URL=http://localhost:3001
```

**3. æ£€æŸ¥CORSé…ç½®**
åç«¯å·²ç»å¯ç”¨CORSï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ `server/index.js` ä¸­çš„ cors é…ç½®ã€‚

### 4. React å¯åŠ¨å¤±è´¥

#### é—®é¢˜æè¿°
```
Error: error:0308010C:digital envelope routines::unsupported
```

#### è§£å†³æ–¹æ¡ˆ

è¿™é€šå¸¸æ˜¯Node.jsç‰ˆæœ¬ä¸å…¼å®¹é—®é¢˜ã€‚

**ä¸´æ—¶è§£å†³æ–¹æ¡ˆ**
```bash
export NODE_OPTIONS=--openssl-legacy-provider
npm run client
```

**æ°¸ä¹…è§£å†³æ–¹æ¡ˆ**
å‡çº§åˆ°Node.js 16+ æˆ–é™çº§åˆ°Node.js 14ã€‚

### 5. æ¨¡å—æ‰¾ä¸åˆ°

#### é—®é¢˜æè¿°
```
Module not found: Error: Can't resolve 'react-router-dom'
```

#### è§£å†³æ–¹æ¡ˆ

```bash
# è¿›å…¥å¯¹åº”ç›®å½•é‡æ–°å®‰è£…
cd client
npm install react-router-dom
cd ..

# æˆ–é‡æ–°è¿è¡Œå®Œæ•´å®‰è£…
./setup.sh
```

### 6. æ•°æ®åº“è¿æ¥å¤±è´¥

#### é—®é¢˜æè¿°
```
Error: Database connection failed
```

#### è§£å†³æ–¹æ¡ˆ

**é‡è¦æç¤º**: ç³»ç»Ÿé»˜è®¤ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œ**æ— éœ€é…ç½®æ•°æ®åº“**ï¼

å¦‚æœæ‚¨çœ‹åˆ°æ•°æ®åº“é”™è¯¯ï¼Œå¯ä»¥ï¼š

1. **å¿½ç•¥è¯¥é”™è¯¯** - APIä»ä¼šè¿”å›æ¨¡æ‹Ÿæ•°æ®
2. **é…ç½®çœŸå®æ•°æ®åº“**ï¼ˆå¯é€‰ï¼‰:
```bash
# ç¼–è¾‘ .env æ–‡ä»¶
DB_HOST=localhost
DB_USER=your_user
DB_PASSWORD=your_password
DB_NAME=capacity_monitoring

# å¯¼å…¥æ•°æ®åº“ç»“æ„
mysql -u root -p < database/schema.sql
```

### 7. æµè§ˆå™¨æ˜¾ç¤ºç©ºç™½é¡µé¢

#### é—®é¢˜æè¿°
æµè§ˆå™¨æ‰“å¼€ http://localhost:3000 æ˜¾ç¤ºç©ºç™½ã€‚

#### è§£å†³æ–¹æ¡ˆ

**1. æ£€æŸ¥å¼€å‘è€…æ§åˆ¶å°**
æŒ‰ F12 æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ŒæŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯ã€‚

**2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
- æŒ‰ Ctrl+Shift+R (Windows/Linux) æˆ– Cmd+Shift+R (Mac) å¼ºåˆ¶åˆ·æ–°

**3. æ£€æŸ¥Reactæ˜¯å¦ç¼–è¯‘æˆåŠŸ**
æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼Œç¡®ä¿æ²¡æœ‰ç¼–è¯‘é”™è¯¯ã€‚

**4. é‡å¯å¼€å‘æœåŠ¡å™¨**
```bash
# Ctrl+C åœæ­¢æœåŠ¡
# é‡æ–°å¯åŠ¨
npm run dev
```

### 8. TypeScript ç±»å‹é”™è¯¯

#### é—®é¢˜æè¿°
```
Type 'string' is not assignable to type 'number'
```

#### è§£å†³æ–¹æ¡ˆ

è¿™äº›é€šå¸¸æ˜¯è­¦å‘Šï¼Œä¸ä¼šé˜»æ­¢åº”ç”¨è¿è¡Œã€‚å¦‚éœ€ä¿®å¤ï¼š

1. æ£€æŸ¥ `client/src/` ä¸­çš„ TypeScript æ–‡ä»¶
2. ç¡®ä¿ç±»å‹å®šä¹‰æ­£ç¡®
3. å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹é—®é¢˜ï¼Œå¯ä»¥åœ¨ `tsconfig.json` ä¸­ä¸´æ—¶ç¦ç”¨ä¸¥æ ¼æ£€æŸ¥

### 9. æ€§èƒ½é—®é¢˜

#### é—®é¢˜æè¿°
åº”ç”¨è¿è¡Œç¼“æ…¢æˆ–å¡é¡¿ã€‚

#### è§£å†³æ–¹æ¡ˆ

**1. æ£€æŸ¥ç³»ç»Ÿèµ„æº**
```bash
# æŸ¥çœ‹Nodeè¿›ç¨‹
ps aux | grep node

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h
```

**2. é‡å¯æœåŠ¡**
```bash
killall -9 node
./start.sh
```

**3. æ¸…ç†æ„å»ºç¼“å­˜**
```bash
rm -rf client/build client/.cache
```

### 10. Git ç›¸å…³é—®é¢˜

#### é—®é¢˜æè¿°
æ— æ³•æäº¤æˆ–æ¨é€ä»£ç ã€‚

#### è§£å†³æ–¹æ¡ˆ

```bash
# æ£€æŸ¥GitçŠ¶æ€
git status

# å¦‚æœæœ‰æœªæäº¤çš„æ›´æ”¹
git add .
git commit -m "ä½ çš„æäº¤ä¿¡æ¯"
git push origin main
```

## ğŸ“‹ å¿«é€Ÿè¯Šæ–­æ¸…å•

é‡åˆ°é—®é¢˜æ—¶ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥ï¼š

- [ ] Node.js ç‰ˆæœ¬æ˜¯å¦ >= 16.x
- [ ] npm æ˜¯å¦æ­£å¸¸å·¥ä½œ
- [ ] ä¾èµ–æ˜¯å¦å®Œå…¨å®‰è£… (`node_modules` å’Œ `client/node_modules` å­˜åœ¨)
- [ ] `.env` å’Œ `client/.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- [ ] ç«¯å£ 3000 å’Œ 3001 æ˜¯å¦è¢«å ç”¨
- [ ] é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†æœ¬åœ°ç«¯å£è®¿é—®

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

**åç«¯æ—¥å¿—**
```bash
# å¯åŠ¨åç«¯å¹¶æŸ¥çœ‹è¯¦ç»†è¾“å‡º
cd /home/engine/project
DEBUG=* npm run server
```

**å‰ç«¯æ—¥å¿—**
å‰ç«¯æ—¥å¿—ç›´æ¥åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ï¼ˆF12ï¼‰ã€‚

### æµ‹è¯•APIç«¯ç‚¹

**ä½¿ç”¨å¿«é€Ÿæµ‹è¯•è„šæœ¬**
```bash
./quick-test.sh
```

**æ‰‹åŠ¨æµ‹è¯•å•ä¸ªç«¯ç‚¹**
```bash
# CTO Dashboard
curl http://localhost:3001/api/capacity/cto-dashboard | jq

# CEO Dashboard  
curl http://localhost:3001/api/capacity/ceo-dashboard | jq

# è¿ç»´æ€»ç›‘
curl http://localhost:3001/api/capacity/ops-director-dashboard | jq

# è¿ç»´å·¥ç¨‹å¸ˆ
curl http://localhost:3001/api/capacity/ops-engineer-dashboard | jq

# ç»„ä»¶è¯¦æƒ…
curl http://localhost:3001/api/capacity/component/1 | jq
```

### æ£€æŸ¥ç½‘ç»œè¿æ¥

```bash
# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep -E '3000|3001'

# æµ‹è¯•æœ¬åœ°è¿æ¥
telnet localhost 3001
```

## ğŸ†˜ ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³æ‚¨çš„é—®é¢˜ï¼š

1. **æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—**
   - åç«¯: æŸ¥çœ‹ç»ˆç«¯è¾“å‡º
   - å‰ç«¯: æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
   
2. **åˆ›å»ºæœ€å°å¤ç°æ¡ˆä¾‹**
   - è®°å½•å‡†ç¡®çš„é”™è¯¯ä¿¡æ¯
   - è®°å½•å¤ç°æ­¥éª¤
   - è®°å½•ç³»ç»Ÿç¯å¢ƒï¼ˆOSã€Nodeç‰ˆæœ¬ç­‰ï¼‰

3. **æäº¤Issue**
   - åŒ…å«å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
   - åŒ…å«æ‚¨å·²å°è¯•çš„è§£å†³æ–¹æ¡ˆ
   - åŒ…å«ç³»ç»Ÿç¯å¢ƒä¿¡æ¯

## ğŸ“ æ”¯æŒä¿¡æ¯

- **æ“ä½œç³»ç»Ÿ**: Linux, macOS, Windows (WSL)
- **Node.js**: 16.x, 18.x, 20.x
- **æµè§ˆå™¨**: Chrome, Firefox, Safari, Edgeï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰
- **æ•°æ®åº“**: MySQL 5.7+ (å¯é€‰)

---

**æç¤º**: å¤§å¤šæ•°é—®é¢˜éƒ½å¯ä»¥é€šè¿‡æ¸…ç†ä¾èµ–å’Œç«¯å£è§£å†³ï¼š
```bash
killall -9 node
rm -rf node_modules client/node_modules
./setup.sh
./start.sh
```
